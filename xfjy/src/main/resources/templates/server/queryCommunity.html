<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>小区查询</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" th:href="@{/app/css/bootstrap.min.css}" />
<link rel="stylesheet" th:href="@{/app/css/bootstrap-theme.min.css}" />
<link rel="stylesheet" th:href="@{/app/css/font-awesome.min.css}" />
<link rel="stylesheet" th:href="@{/app/css/bootstrap-datetimepicker.css}" />

<script th:src="@{/app/js/vendor/jquery-1.11.1.js}"></script>
<script th:src="@{/app/js/vendor/bootstrap.min.js}"></script>
<script th:inline="javascript" th:src="@{/app/js/commonSort.js}"></script>
<script th:inline="javascript" th:src="@{/app/js/commonPage.js}"></script>
<script th:src="@{/app/js/vendor/bootstrap-datetimepicker.js}"></script>
<script type="text/javascript" th:src="@{/app/validation/jquery.validate.min.js}"></script>
<script th:src="@{/app/js/public.js}"></script>

<script type="text/javascript">
//<![CDATA[
function showAddModal(flag){ 
	var len=$('input:checked').length;
	if(flag=='U'){
		if(len==1){
 			var wid=$('input:checked').val();
 			$("#dvmodal-body").html("").load(basePath+"/server/communityAddInit.html?wid="+wid+"&rn="+Math.random(), function() {
 				$('#inputDialog').modal('show'); 
 				});
		}
	}else{
		$("#dvmodal-body").html("").load(basePath+"/server/communityAddInit.html?rn="+Math.random(), function() {
				$('#inputDialog').modal('show'); 
				});
	}
}

function deleteSelect(){
	var len=$('input:checked').length;
	if(len>=1){
		$.ajax({
            type: "POST",
            url: basePath+'/server/deleteCommu',
            data:$("#orderByForm").serialize(),
            success: function(data) {
            	if(data=="S"){
            		alert('处理成功！');
            	}else{
            		 alert('处理失败！');
            	}
            }
        });  
	}
	 
}
/*]]>*/
</script>
</head>
<body>
	<div class="container-fluid">
		<form id="orderByForm" th:action="@{/server/queryCommunity.html}" method="post">
			<input type="hidden" id="orderByStr" name="orderByStr"   th:value="${orderBy}"/>
		 <div class="row" id="qry" style="margin-right:15px;">
		 	<div  class="col-xs-12" style="padding:10px;border:solid 1px #cccccc;margin:15px 15px;padding:10px 10px">
		 		<div class="col-xs-4" style="width:220px">
		 			<label>地区:</label>
		 			<select  name="areaId" style="height:30px;width:120px" >
		 				<option value="">全部</option>
							<option th:each="area : ${areaList}"
								th:value="${area.id}" th:text="${area.name}"
								th:selected="${parms.areaId == area.id}"></option>
					</select>
		 		</div>
		 		<div class="col-xs-4" style="width:280px">
		 		<label>小区名称:</label>
		 		<input name="name" class="input-append date" id="name"      th:value="${parms.name}"/>
		 		</div>	
		 		<div class="col-xs-2">
		 			<button type="submit" class="btn btn-primary"   name="btnQuery" id="btnQuery"  >查询</button> 
		 		</div>
		 	</div>
		 </div>
		 <div id="tbdata" style="width:100%;overflow: scroll">
			<table class="table table-bordered table-striped" style="width:2000px">
				<thead>
					<tr>
						<th  style="width:50px">选择</th>
						<th>地区</th>
						<th>小区名称</th>
						<th>地址</th>
					</tr>
				</thead>
				<tbody>
					<tr  th:each="item : ${commPageView.resultList}">
						<td>
							<input type="checkbox" id="cbchooseCommu" name="CommuIds" th:attr="value=''+${item.id}+''" />
						</td>
						<td style="width:35px" th:text="${item.areaName}"></td>
						<td th:text="${item.name}"></td>
						<td th:text="${item.address}"></td>
					</tr>
				</tbody>
			</table>
			<div>
				<div style="border:1px solid #fffff">
					 <nav id="tslCommon-Page"  style="float:right">
			  			<input type="hidden" name="currentPageNum" th:value="${commPageView.currentPageNum}"/>
			  			<input type="hidden" name="totalPageCnt" th:value="${commPageView.totalPageCnt}"/>
			  			<input type="hidden" name="totalRecord" th:value="${commPageView.totalRecord}"/>
					</nav>
				</div> 
				<div style="float: left; margin-right: 15px;">
					<button type="button" name="btnQuery" id="btnQuery"  class="btn btn-info"   
						onclick="showAddModal('A')">添加</button>
					<button type="button" name="btnQuery" id="btnQuery"  class="btn btn-info"   
						onclick="showAddModal('U')">修改</button>
						<button type="button" name="btnQuery" id="btnQuery"  class="btn btn-info"   
						onclick="deleteSelect()">删除</button>
				</div> 
			</div>
		</div>
	</form>
	
	<div class="modal fade" id="inputDialog" tabindex="-1" role="dialog"  aria-labelledby="inputDialogLabel" aria-hidden="true">
		   <div class="modal-dialog">
		      <div class="modal-content" style="width:800px">
		         <div class="modal-header">
		            <button type="button" class="close" 
		               data-dismiss="modal" aria-hidden="true">
		                  &times;
		            </button>
		            <h4 class="modal-title" id="inputDialoglLabel">添加/修改阿姨信息</h4> 
		         </div>
		         <div class="modal-body" id='dvmodal-body'></div>
		         <div style="text-align:center;height:60px">
		            <button type="button" id="submit"  onclick="save()"  class="btn btn-danger fl btn-lg" style="border-radius:0px;width:128px;height:34px;line-height:10px;"> 确定 </button>
		             <button type="button" data-dismiss="modal"
								class="btn btn-lg btn-blue" style="border-radius:0px;width:128px;height:34px;margin-left:25px;line-height:10px;">取消</button>
		         
		         </div>
		      </div>
			</div>
		</div>
		
	</div>
<script th:inline="javascript">
        /*<![CDATA[*/
            $('#startTime').datetimepicker({
                autoclose:true,
                todayHighlight:true,
                format: 'yyyy-mm-dd',
                pickDate: true,  
                pickTime: false,
                minView:2
            });
        
            $('#endTime').datetimepicker({
                autoclose:true,
                todayHighlight:true,
                format: 'yyyy-mm-dd',
                pickDate: true,  
                pickTime: false ,
                minView:2
            });
            
            $('#serviceDate').datetimepicker({
                autoclose:true,
                todayHighlight:true,
                format: 'yyyy-mm-dd',
                pickDate: true,  
                pickTime: false ,
                minView:2
            });
            
            
        /*]]>*/
    </script>

</body>
</html>